{"version":3,"file":"Task.js","sourceRoot":"","sources":["../../../src/models/Task.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,uCAAwC;AACxC,+BAAmC;AAEnC,wDAA+B;AAE/B,MAAM,UAAU,GAAG,IAAI,iBAAM,CAAQ;IAClC,GAAG,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,SAAM,EAAE;IACtC,KAAK,EAAE;QACJ,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,MAAM,EAAE,IAAI;KACd;IACD,WAAW,EAAE;QACV,IAAI,EAAE,MAAM;KACd;IACD,MAAM,EAAE;QACL,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,SAAS,EAAE,IAAI;KACjB;IACD,OAAO,EAAE;QACN,IAAI,EAAE,MAAM;KACd;IACD,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,SAAS,EAAE,CAAC;CAC9C,CAAC,CAAA;AAEF,UAAU,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE,UAAgB,IAAS;;QACtE,MAAM,iBAAO,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAA;QACjD,IAAI,EAAE,CAAA;IACT,CAAC;CAAA,CAAC,CAAA;AAEF,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE;IACtB,SAAS,EAAE,UAAU,IAAI,EAAE,GAAG,EAAE,QAAQ;QACrC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAA;QAChB,OAAO,GAAG,CAAC,GAAG,CAAA;QACd,OAAO,GAAG,CAAC,GAAG,CAAA;IACjB,CAAC;CACH,CAAC,CAAA;AAEF,MAAM,IAAI,GAAG,IAAA,gBAAK,EAAQ,MAAM,EAAE,UAAU,CAAC,CAAA;AAC7C,kBAAe,IAAI,CAAA","sourcesContent":["import { Schema, model } from 'mongoose'\nimport { v4 as uuidv4 } from 'uuid'\nimport { ITask } from '../../types'\nimport SubTask from './SubTask'\n\nconst TaskSchema = new Schema<ITask>({\n   _id: { type: String, default: uuidv4 },\n   title: {\n      type: String,\n      required: true,\n      unique: true,\n   },\n   description: {\n      type: String,\n   },\n   status: {\n      type: String,\n      required: true,\n      lowercase: true,\n   },\n   boardID: {\n      type: String,\n   },\n   subtasks: [{ type: String, ref: 'SubTask' }],\n})\n\nTaskSchema.pre('deleteOne', { document: true }, async function (next: any) {\n   await SubTask.deleteMany({ status: this.status })\n   next()\n})\n\nTaskSchema.set('toJSON', {\n   transform: function (_doc, ret, _options) {\n      ret.id = ret._id\n      delete ret._id\n      delete ret.__v\n   },\n})\n\nconst Task = model<ITask>('Task', TaskSchema)\nexport default Task\n"]}