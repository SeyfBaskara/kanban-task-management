{"version":3,"file":"Column.js","sourceRoot":"","sources":["../../../src/models/Column.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,uCAAwC;AACxC,+BAAmC;AAEnC,kDAAyB;AACzB,wDAA+B;AAE/B,MAAM,YAAY,GAAG,IAAI,iBAAM,CAAU;IACtC,GAAG,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,SAAM,EAAE;IACtC,IAAI,EAAE;QACH,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,SAAS,EAAE,IAAI;KACjB;IACD,OAAO,EAAE;QACN,IAAI,EAAE,MAAM;QACZ,MAAM,EAAE,IAAI;KACd;IACD,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC;CACxC,CAAC,CAAA;AAEF,YAAY,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE,UAAgB,IAAI;;QACnE,MAAM,cAAI,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAA;QAC5C,MAAM,iBAAO,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAA;QAC/C,IAAI,EAAE,CAAA;IACT,CAAC;CAAA,CAAC,CAAA;AAEF,YAAY,CAAC,GAAG,CAAC,QAAQ,EAAE;IACxB,SAAS,EAAE,UAAU,IAAI,EAAE,GAAG,EAAE,QAAQ;QACrC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAA;QAChB,OAAO,GAAG,CAAC,GAAG,CAAA;QACd,OAAO,GAAG,CAAC,GAAG,CAAA;IACjB,CAAC;CACH,CAAC,CAAA;AAEF,MAAM,MAAM,GAAG,IAAA,gBAAK,EAAU,QAAQ,EAAE,YAAY,CAAC,CAAA;AACrD,kBAAe,MAAM,CAAA","sourcesContent":["import { Schema, model } from 'mongoose'\nimport { v4 as uuidv4 } from 'uuid'\nimport { IColumn } from '../../types'\nimport Task from './Task'\nimport SubTask from './SubTask'\n\nconst ColumnSchema = new Schema<IColumn>({\n   _id: { type: String, default: uuidv4 },\n   name: {\n      type: String,\n      required: true,\n      lowercase: true,\n   },\n   boardID: {\n      type: String,\n      unique: true,\n   },\n   tasks: [{ type: String, ref: 'Task' }],\n})\n\nColumnSchema.pre('deleteOne', { document: true }, async function (next) {\n   await Task.deleteMany({ status: this.name })\n   await SubTask.deleteMany({ status: this.name })\n   next()\n})\n\nColumnSchema.set('toJSON', {\n   transform: function (_doc, ret, _options) {\n      ret.id = ret._id\n      delete ret._id\n      delete ret.__v\n   },\n})\n\nconst Column = model<IColumn>('Column', ColumnSchema)\nexport default Column\n"]}