{"version":3,"file":"Board.js","sourceRoot":"","sources":["../../../src/models/Board.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,uCAAwC;AACxC,+BAAmC;AAEnC,sDAA6B;AAC7B,kDAAyB;AACzB,wDAA+B;AAE/B,MAAM,WAAW,GAAG,IAAI,iBAAM,CAAS;IACpC,GAAG,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,SAAM,EAAE;IACtC,IAAI,EAAE;QACH,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,MAAM,EAAE,IAAI;KACd;IACD,OAAO,EAAE;QACN,IAAI,EAAE,MAAM;KACd;IACD,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,QAAQ,EAAE,CAAC;CAC5C,CAAC,CAAA;AAEF,WAAW,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE,UAAgB,IAAS;;QACvE,MAAM,gBAAM,CAAC,UAAU,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAA;QAClD,MAAM,cAAI,CAAC,UAAU,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAA;QAChD,MAAM,iBAAO,CAAC,UAAU,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAA;QACnD,IAAI,EAAE,CAAA;IACT,CAAC;CAAA,CAAC,CAAA;AAEF,WAAW,CAAC,GAAG,CAAC,QAAQ,EAAE;IACvB,SAAS,EAAE,UAAU,IAAI,EAAE,GAAG,EAAE,QAAQ;QACrC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAA;QAChB,OAAO,GAAG,CAAC,GAAG,CAAA;QACd,OAAO,GAAG,CAAC,GAAG,CAAA;IACjB,CAAC;CACH,CAAC,CAAA;AAEF,MAAM,KAAK,GAAG,IAAA,gBAAK,EAAS,OAAO,EAAE,WAAW,CAAC,CAAA;AACjD,kBAAe,KAAK,CAAA","sourcesContent":["import { Schema, model } from 'mongoose'\nimport { v4 as uuidv4 } from 'uuid'\nimport { IBoard } from '../../types'\nimport Cloumn from './Column'\nimport Task from './Task'\nimport SubTask from './SubTask'\n\nconst BoardSchema = new Schema<IBoard>({\n   _id: { type: String, default: uuidv4 },\n   name: {\n      type: String,\n      required: true,\n      unique: true,\n   },\n   boardID: {\n      type: String,\n   },\n   columns: [{ type: String, ref: 'Column' }],\n})\n\nBoardSchema.pre('deleteOne', { document: true }, async function (next: any) {\n   await Cloumn.deleteMany({ boardID: this.boardID })\n   await Task.deleteMany({ boardID: this.boardID })\n   await SubTask.deleteMany({ boardID: this.boardID })\n   next()\n})\n\nBoardSchema.set('toJSON', {\n   transform: function (_doc, ret, _options) {\n      ret.id = ret._id\n      delete ret._id\n      delete ret.__v\n   },\n})\n\nconst Board = model<IBoard>('Board', BoardSchema)\nexport default Board\n"]}